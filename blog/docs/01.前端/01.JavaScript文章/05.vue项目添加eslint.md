---
title: vue项目添加eslint
categories: 
  - 前端
  - Vue
tags: 
  - vue
  - eslint
author: 
  name: don
  link: null
date: 2021-02-09 10:33:17
permalink: /pages/89016c/
---

# vue添加eslint支持

## 主要场景
1. vue旧项目添加eslint支持
2. 不依赖与vue手脚架生成的项目添加eslint支持
   
## 怎么添加，有几种方法
1. 第一种方法
```sh
# 自动安装Eslint 插件，执行后，就会让你选择Eslint的验证风格，然后什么时候验证。会自动创建 .eslintrc.js 文件
vue add @vue/eslint
```
2. 第二种方法
```sh
# 自动vue eslint插件，执行后，就会让你选择Eslint的验证风格，然后什么时候验证。会自动创建 .eslintrc.js 文件
vue add @vue/cli-plugin-eslint
```
3. 第三种方法
```sh
# 手动安装vue的Eslint插件，这种安装要自己手写插件风格
npm i -D eslint eslint-plugin-vue eslint-plugin-html eslint-config-standard eslint-plugin-import eslint-plugin-node eslint-plugin-promise eslint-plugin-standard 
```
手动创建.eslintrc.js 文件在文件里写入
```js
module.exports = {
    extends: [
        'plugin:vue/recommended'
    ],
    rules: {
        "no-alert": 0,
        "no-multi-spaces": "error", // 禁止多个空格 
        //"semi": [2, "always"] ,// 自动补充分号
       "quotes": ["error", "single"], // 使用单引号
        //在computed properties中禁用异步actions
        'vue/no-async-in-computed-properties': 'error',
        //不允许重复的keys
        'vue/no-dupe-keys': 'error',
        //不允许重复的attributes
        'vue/no-duplicate-attributes': 'error',
        //在 <template> 标签下不允许解析错误
        'vue/no-parsing-error': ['error',{
            'x-invalid-end-tag': false,
        }],
        //不允许覆盖保留关键字
        'vue/no-reserved-keys': 'error',
        //强制data必须是一个带返回值的函数
        // 'vue/no-shared-component-data': 'error',
        //不允许在computed properties中出现副作用。
        'vue/no-side-effects-in-computed-properties': 'error',
        //<template>不允许key属性
        'vue/no-template-key': 'error',
        //在 <textarea> 中不允许mustaches
        'vue/no-textarea-mustache': 'error',
        //不允许在v-for或者范围内的属性出现未使用的变量定义
        'vue/no-unused-vars': 'error',
        //<component>标签需要v-bind:is属性
        'vue/require-component-is': 'error',
        // render 函数必须有一个返回值
        'vue/require-render-return': 'error',
        //保证 v-bind:key 和 v-for 指令成对出现
        'vue/require-v-for-key': 'error',
        // 检查默认的prop值是否有效
        'vue/require-valid-default-prop': 'error',
        // 保证computed属性中有return语句 
        'vue/return-in-computed-property': 'error',
        // 强制校验 template 根节点
        'vue/valid-template-root': 'error',
        // 强制校验 v-bind 指令
        'vue/valid-v-bind': 'error',
        // 强制校验 v-cloak 指令
        'vue/valid-v-cloak': 'error',
        // 强制校验 v-else-if 指令
        'vue/valid-v-else-if': 'error',
        // 强制校验 v-else 指令 
        'vue/valid-v-else': 'error',
        // 强制校验 v-for 指令
        'vue/valid-v-for': 'error',
        // 强制校验 v-html 指令
        'vue/valid-v-html': 'error',
        // 强制校验 v-if 指令
        'vue/valid-v-if': 'error',
        // 强制校验 v-model 指令
        'vue/valid-v-model': 'error',
        // 强制校验 v-on 指令
        'vue/valid-v-on': 'error',
        // 强制校验 v-once 指令
        'vue/valid-v-once': 'error',
        // 强制校验 v-pre 指令
        'vue/valid-v-pre': 'error',
        // 强制校验 v-show 指令
        'vue/valid-v-show': 'error',
        // 强制校验 v-text 指令
        'vue/valid-v-text': 'error'
    }
}
```

## vscode保存时代码格式化
1. 安装以下vscode扩展插件
- ESLint
- Prettier - Code formatter
- Vetur
  
1. 打开 settings 文件

`Code --> preferences -->setting` 将下面配置添加到 setting.json 文件中
```js
{
  // tab 大小为2个空格
  "editor.tabSize": 2,
  // 100 列后换行
  "editor.wordWrapColumn": 100,
  // 保存时格式化
  "editor.formatOnSave": true,
  // 开启 vscode 文件路径导航
  "breadcrumbs.enabled": true,
  // prettier 设置语句末尾不加分号
  "prettier.semi": false,
  // prettier 设置强制单引号
  "prettier.singleQuote": true,
  // 选择 vue 文件中 template 的格式化工具
  "vetur.format.defaultFormatter.html": "prettyhtml",
  // 显示 markdown 中英文切换时产生的特殊字符
  "editor.renderControlCharacters": true,
  // 设置 eslint 保存时自动修复
  "eslint.autoFixOnSave": true,
  // eslint 检测文件类型
  "eslint.validate": [
     "vue",
     "html",
     "javascript",
     "typescript",
     "javascriptreact",
     "typescriptreact"
  ],
  // vetur 的自定义设置
  "vetur.format.defaultFormatterOptions": {
    "prettier": {
      "singleQuote": true,
      "semi": false
    }
  },
  // vue 扩展的文件默认使用 prettier 进行格式化
   "[vue]": {
    "editor.defaultFormatter": "esbenp.prettier-vscode"
  },
}
```

2. 重启vscode








